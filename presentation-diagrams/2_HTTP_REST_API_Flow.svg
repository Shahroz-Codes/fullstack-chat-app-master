<svg viewBox="0 0 1200 950" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" style="max-width: 1200px; max-height: 950px; overflow: auto;">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#2d3748" />
    </marker>
    <marker id="arrowheadRed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#e53e3e" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="600" y="40" font-size="32" font-weight="bold" text-anchor="middle" fill="#1a365d">Feature 2: HTTP/HTTPS REST API Communication</text>

  <!-- Legend -->
  <rect x="50" y="70" width="1100" height="50" fill="#f0f4f8" stroke="#cbd5e0" stroke-width="2" rx="5"/>
  <text x="70" y="105" font-size="12" fill="#2d3748">HTTP Protocol Flow: Request-Response Cycle â†’ REST API Endpoints â†’ HTTPS Security</text>

  <!-- HTTP Protocol Stack -->
  <text x="150" y="160" font-size="16" font-weight="bold" fill="#1a365d">HTTP Protocol Stack</text>

  <!-- Application Layer -->
  <rect x="100" y="180" width="200" height="50" fill="#e6fffa" stroke="#0f766e" stroke-width="2" rx="5"/>
  <text x="200" y="210" font-size="12" text-anchor="middle" fill="#0f766e" font-weight="bold">Application Layer</text>
  <text x="200" y="225" font-size="10" text-anchor="middle" fill="#0f766e">HTTP/1.1, REST API, JSON</text>

  <!-- Transport Layer -->
  <rect x="100" y="240" width="200" height="50" fill="#bee3f8" stroke="#2c5282" stroke-width="2" rx="5"/>
  <text x="200" y="270" font-size="12" text-anchor="middle" fill="#2c5282" font-weight="bold">Transport Layer</text>
  <text x="200" y="285" font-size="10" text-anchor="middle" fill="#2c5282">TCP (Port 5001)</text>

  <!-- Internet Layer -->
  <rect x="100" y="300" width="200" height="50" fill="#fef3c7" stroke="#92400e" stroke-width="2" rx="5"/>
  <text x="200" y="330" font-size="12" text-anchor="middle" fill="#92400e" font-weight="bold">Internet Layer</text>
  <text x="200" y="345" font-size="10" text-anchor="middle" fill="#92400e">IP Addressing</text>

  <!-- Client and Server -->
  <rect x="400" y="150" width="150" height="80" fill="#4299e1" stroke="#2b6cb0" stroke-width="3" rx="8"/>
  <text x="475" y="185" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Client</text>
  <text x="475" y="205" font-size="11" text-anchor="middle" fill="white">Browser/Fetch API</text>

  <rect x="650" y="150" width="150" height="80" fill="#ed8936" stroke="#7c2d12" stroke-width="3" rx="8"/>
  <text x="725" y="185" font-size="14" font-weight="bold" text-anchor="middle" fill="white">Server</text>
  <text x="725" y="205" font-size="11" text-anchor="middle" fill="white">Node.js/Express</text>

  <!-- HTTP Request-Response Cycle -->
  <!-- Request -->
  <line x1="550" y1="190" x2="650" y2="190" stroke="#2d3748" stroke-width="4" marker-end="url(#arrowhead)"/>
  <rect x="580" y="170" width="50" height="25" fill="#e6fffa" stroke="#0f766e" stroke-width="1" rx="3"/>
  <text x="605" y="188" font-size="10" text-anchor="middle" fill="#0f766e" font-weight="bold">Request</text>

  <!-- Response -->
  <line x1="650" y1="210" x2="550" y2="210" stroke="#e53e3e" stroke-width="4" marker-end="url(#arrowheadRed)"/>
  <rect x="580" y="190" width="50" height="25" fill="#fed7d7" stroke="#c53030" stroke-width="1" rx="3"/>
  <text x="605" y="208" font-size="10" text-anchor="middle" fill="#c53030" font-weight="bold">Response</text>

  <!-- HTTP Methods and Status Codes -->
  <text x="400" y="280" font-size="16" font-weight="bold" fill="#1a365d">HTTP Methods &amp; Status Codes</text>

  <!-- GET -->
  <rect x="350" y="300" width="120" height="40" fill="#c6f6d5" stroke="#22543d" stroke-width="2" rx="5"/>
  <text x="410" y="320" font-size="12" text-anchor="middle" fill="#22543d" font-weight="bold">GET</text>
  <text x="410" y="335" font-size="10" text-anchor="middle" fill="#22543d">200 OK</text>

  <!-- POST -->
  <rect x="480" y="300" width="120" height="40" fill="#bee3f8" stroke="#2c5282" stroke-width="2" rx="5"/>
  <text x="540" y="320" font-size="12" text-anchor="middle" fill="#2c5282" font-weight="bold">POST</text>
  <text x="540" y="335" font-size="10" text-anchor="middle" fill="#2c5282">201 Created</text>

  <!-- PUT -->
  <rect x="610" y="300" width="120" height="40" fill="#fef3c7" stroke="#92400e" stroke-width="2" rx="5"/>
  <text x="670" y="320" font-size="12" text-anchor="middle" fill="#92400e" font-weight="bold">PUT</text>
  <text x="670" y="335" font-size="10" text-anchor="middle" fill="#92400e">200 OK</text>

  <!-- DELETE -->
  <rect x="740" y="300" width="120" height="40" fill="#fed7d7" stroke="#c53030" stroke-width="2" rx="5"/>
  <text x="800" y="320" font-size="12" text-anchor="middle" fill="#c53030" font-weight="bold">DELETE</text>
  <text x="800" y="335" font-size="10" text-anchor="middle" fill="#c53030">204 No Content</text>

  <!-- REST API Endpoints -->
  <text x="400" y="380" font-size="16" font-weight="bold" fill="#1a365d">REST API Endpoints</text>

  <!-- Authentication Endpoints -->
  <rect x="350" y="400" width="200" height="60" fill="#e6fffa" stroke="#0f766e" stroke-width="2" rx="5"/>
  <text x="450" y="420" font-size="12" text-anchor="middle" fill="#0f766e" font-weight="bold">Authentication</text>
  <text x="450" y="435" font-size="10" text-anchor="middle" fill="#0f766e">POST /api/auth/signup</text>
  <text x="450" y="450" font-size="10" text-anchor="middle" fill="#0f766e">POST /api/auth/login</text>

  <!-- Message Endpoints -->
  <rect x="570" y="400" width="200" height="60" fill="#fae8ff" stroke="#581c87" stroke-width="2" rx="5"/>
  <text x="670" y="420" font-size="12" text-anchor="middle" fill="#581c87" font-weight="bold">Messages</text>
  <text x="670" y="435" font-size="10" text-anchor="middle" fill="#581c87">GET /api/messages/:userId</text>
  <text x="670" y="450" font-size="10" text-anchor="middle" fill="#581c87">POST /api/messages/send</text>

  <!-- User Endpoints -->
  <rect x="790" y="400" width="200" height="60" fill="#fef3c7" stroke="#92400e" stroke-width="2" rx="5"/>
  <text x="890" y="420" font-size="12" text-anchor="middle" fill="#92400e" font-weight="bold">Users</text>
  <text x="890" y="435" font-size="10" text-anchor="middle" fill="#92400e">GET /api/users</text>
  <text x="890" y="450" font-size="10" text-anchor="middle" fill="#92400e">PUT /api/auth/update-profile</text>

  <!-- HTTPS Security Details -->
  <rect x="50" y="500" width="1100" height="200" fill="#f7fafc" stroke="#2d3748" stroke-width="2" rx="5"/>
  <text x="70" y="525" font-size="16" font-weight="bold" fill="#1a365d">ðŸ”’ HTTPS Security Implementation</text>

  <text x="90" y="555" font-size="13" fill="#2d3748" font-weight="bold">TLS Handshake Process:</text>
  <text x="110" y="575" font-size="12" fill="#2d3748">1. Client Hello --&gt; Server sends certificate</text>
  <text x="110" y="595" font-size="12" fill="#2d3748">2. Certificate validation --&gt; Key exchange</text>
  <text x="110" y="615" font-size="12" fill="#2d3748">3. Symmetric encryption established</text>

  <text x="90" y="640" font-size="13" fill="#2d3748" font-weight="bold">HTTP Security Headers:</text>
  <text x="110" y="660" font-size="12" fill="#2d3748">â€¢ Content-Security-Policy (XSS prevention)</text>
  <text x="110" y="680" font-size="12" fill="#2d3748">â€¢ X-Frame-Options (clickjacking prevention)</text>
  <text x="110" y="700" font-size="12" fill="#2d3748">â€¢ Strict-Transport-Security (force HTTPS)</text>

  <text x="600" y="555" font-size="13" fill="#2d3748" font-weight="bold">Authentication Headers:</text>
  <text x="620" y="575" font-size="12" fill="#2d3748">â€¢ Authorization: Bearer &amp;lt;JWT&amp;gt;</text>
  <text x="620" y="595" font-size="12" fill="#2d3748">â€¢ Cookie: token=&amp;lt;HttpOnly&amp;gt;</text>
  <text x="620" y="615" font-size="12" fill="#2d3748">â€¢ Content-Type: application/json</text>

  <text x="600" y="640" font-size="13" fill="#2d3748" font-weight="bold">CORS Configuration:</text>
  <text x="620" y="660" font-size="12" fill="#2d3748">â€¢ Access-Control-Allow-Origin</text>
  <text x="620" y="680" font-size="12" fill="#2d3748">â€¢ Access-Control-Allow-Methods</text>
  <text x="620" y="700" font-size="12" fill="#2d3748">â€¢ Access-Control-Allow-Headers</text>

  <!-- HTTP Request Example -->
  <rect x="50" y="730" width="500" height="120" fill="#f0f4f8" stroke="#cbd5e0" stroke-width="2" rx="5"/>
  <text x="70" y="750" font-size="12" font-weight="bold" fill="#1a365d">Sample HTTP Request:</text>
  <text x="90" y="770" font-size="10" fill="#2d3748" font-family="monospace">POST /api/auth/login HTTP/1.1</text>
  <text x="90" y="785" font-size="10" fill="#2d3748" font-family="monospace">Host: localhost:5001</text>
  <text x="90" y="800" font-size="10" fill="#2d3748" font-family="monospace">Content-Type: application/json</text>
  <text x="90" y="815" font-size="10" fill="#2d3748" font-family="monospace">Authorization: Bearer eyJ...</text>
  <text x="90" y="830" font-size="10" fill="#2d3748" font-family="monospace">{"email":"user@example.com","password":"..."}</text>

  <!-- HTTP Response Example -->
  <rect x="580" y="730" width="500" height="120" fill="#f0f4f8" stroke="#cbd5e0" stroke-width="2" rx="5"/>
  <text x="600" y="750" font-size="12" font-weight="bold" fill="#1a365d">Sample HTTP Response:</text>
  <text x="620" y="770" font-size="10" fill="#2d3748" font-family="monospace">HTTP/1.1 200 OK</text>
  <text x="620" y="785" font-size="10" fill="#2d3748" font-family="monospace">Content-Type: application/json</text>
  <text x="620" y="800" font-size="10" fill="#2d3748" font-family="monospace">Set-Cookie: token=abc123; HttpOnly</text>
  <text x="620" y="815" font-size="10" fill="#2d3748" font-family="monospace">{"user":{"_id":"...","fullName":"John"}}</text>
</svg>
